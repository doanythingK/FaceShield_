<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:vm="clr-namespace:FaceShield.ViewModels.Workspace"
             xmlns:enums="clr-namespace:FaceShield.Enums.Workspace"
             x:Class="FaceShield.Views.Workspace.ToolPanelView"
             x:DataType="vm:ToolPanelViewModel">

  <Border Background="#151515" Padding="12">
    <StackPanel Spacing="8">
      <StackPanel Orientation="Horizontal" Spacing="12">

      <ToggleButton IsChecked="{Binding CurrentMode,
                      Converter={StaticResource EnumEqualsConverter},
                      ConverterParameter={x:Static enums:EditMode.Auto}}"
                    Command="{Binding SetAutoCommand}">
          <TextBlock Text="자동"/>
      </ToggleButton>

      <!-- TODO: 기능 구현 전까지 숨김 -->
      <!--<ToggleButton IsChecked="{Binding CurrentMode,
                      Converter={StaticResource EnumEqualsConverter},
                      ConverterParameter={x:Static enums:EditMode.Manual}}"
                    Command="{Binding SetManualCommand}" >
        <TextBlock Text="수동"/>
      </ToggleButton>-->

      <ToggleButton IsChecked="{Binding CurrentMode,
                    Converter={StaticResource EnumEqualsConverter},
                    ConverterParameter={x:Static enums:EditMode.Brush}}"
                    Command="{Binding SetBrushCommand}">
        <TextBlock Text="브러시"/>
    </ToggleButton>

      <ToggleButton IsChecked="{Binding CurrentMode,
                      Converter={StaticResource EnumEqualsConverter},
                      ConverterParameter={x:Static enums:EditMode.Eraser}}"
                    Command="{Binding SetEraserCommand}">
          <TextBlock Text="지우개"/>
      </ToggleButton>

      <Button Content="되돌리기" Command="{Binding UndoCommand}" />
      <Button Content="저장" Command="{Binding SaveCommand}" />

      </StackPanel>

      <StackPanel Orientation="Horizontal" Spacing="8" IsVisible="{Binding IsAutoRunning}">
        <ProgressBar Width="180" Height="8" Minimum="0" Maximum="100"
                     Value="{Binding AutoProgress}" />
        <TextBlock Text="{Binding AutoProgress, StringFormat={}{0}%}" />
        <Button Content="취소" Command="{Binding CancelAutoCommand}" />
      </StackPanel>

      <StackPanel Orientation="Horizontal" Spacing="8" IsVisible="{Binding IsExportRunning}">
        <ProgressBar Width="180" Height="8" Minimum="0" Maximum="100"
                     Value="{Binding ExportProgress}" />
        <TextBlock Text="{Binding ExportProgress, StringFormat=내보내기 {0}%}" />
        <TextBlock Text="{Binding ExportEtaText}" Opacity="0.85" />
        <Button Content="취소" Command="{Binding CancelExportCommand}" />
      </StackPanel>

      <Border Background="#1E1E1E" CornerRadius="6" Padding="8,6"
              IsVisible="{Binding ShowBrushSize}">
        <StackPanel Orientation="Horizontal" Spacing="10">
          <TextBlock Text="브러시 크기" VerticalAlignment="Center"/>
          <Slider Width="200"
                  MinHeight="24"
                  Minimum="{Binding MinBrushDiameter}"
                  Maximum="{Binding MaxBrushDiameter}"
                  Value="{Binding BrushDiameter, Mode=TwoWay}"
                  TickFrequency="4"
                  IsSnapToTickEnabled="True"/>
          <TextBlock Text="{Binding BrushDiameter}" Width="32" HorizontalAlignment="Right"/>
        </StackPanel>
      </Border>
    </StackPanel>
  </Border>
</UserControl>
